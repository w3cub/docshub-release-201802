
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Ovirt_auth - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.2. ">
  <meta name="keywords" content="ovirt, auth, -, module, manage, authentication, rhv, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/ovirt_auth_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="ovirt-auth">ovirt_auth - Module to manage authentication to oVirt/RHV</h1> <div class="versionadded" id="ovirt-auth-module-to-manage-authentication-to-ovirt-rhv"> <p><span class="versionmodified">New in version 2.2.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#requirements-on-host-that-executes-module" id="id2">Requirements (on host that executes module)</a></li> <li><a class="reference internal" href="#options" id="id3">Options</a></li> <li><a class="reference internal" href="#examples" id="id4">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id5">Return Values</a></li> <li>
<a class="reference internal" href="#notes" id="id6">Notes</a><ul> <li><a class="reference internal" href="#status" id="id7">Status</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>This module authenticates to oVirt/RHV engine and creates SSO token, which should be later used in all other oVirt/RHV modules, so all modules don’t need to perform login and logout. This module returns an Ansible fact called <em>ovirt_auth</em>. Every module can use this fact as <code>auth</code> parameter, to perform authentication.</li> </ul>   <h2 id="requirements-on-host-that-executes-module">Requirements (on host that executes module)</h2>  <ul class="simple"> <li>python &gt;= 2.7</li> <li>ovirt-engine-sdk-python &gt;= 4.0.0</li> </ul>    <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>ca_file<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>A PEM file containing the trusted CA certificates. The certificate presented by the server will be verified using these CA certificates. If <code>ca_file</code> parameter is not set, system wide CA certificate store is used.</div> </td> </tr> <tr> <td>compress<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>A boolean flag indicating if the SDK should ask the server to send compressed responses. The default is <em>True</em>. Note that this is a hint for the server, and that it may return uncompressed data even when this parameter is set to <em>True</em>.</div> </td> </tr> <tr> <td>headers<br><div style="font-size: small;">(added in 2.4)</div>
</td> <td>no</td> <td></td> <td></td> <td> <div>A dictionary of HTTP headers to be added to each API call.</div> </td> </tr> <tr> <td>insecure<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>A boolean flag that indicates if the server TLS certificate and host name should be checked.</div> </td> </tr> <tr> <td>kerberos<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>A boolean flag indicating if Kerberos authentication should be used instead of the default basic authentication.</div> </td> </tr> <tr> <td>password<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>The password of the user.</div> </td> </tr> <tr> <td>state<br>
</td> <td>no</td> <td>present</td> <td><ul>
<li>present</li>
<li>absent</li>
</ul></td> <td> <div>Specifies if a token should be created or revoked.</div> </td> </tr> <tr> <td>timeout<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>The maximum total time to wait for the response, in seconds. A value of zero (the default) means wait forever. If the timeout expires before the response is received an exception will be raised.</div> </td> </tr> <tr> <td>url<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>A string containing the base URL of the server. For example: <em>https://server.example.com/ovirt-engine/api</em>.</div> </td> </tr> <tr> <td>username<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>The name of the user. For example: <em>admin@internal</em>.</div> </td> </tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="YAML">tasks:
  - block:
       # Create a vault with `ovirt_password` variable which store your
       # oVirt/RHV user's password, and include that yaml file with variable:
       - include_vars: ovirt_password.yml

       - name: Obtain SSO token with using username/password credentials
         ovirt_auth:
           url: https://ovirt.example.com/ovirt-engine/api
           username: admin@internal
           ca_file: ca.pem
           password: "{{ ovirt_password }}"

       # Previous task generated I(ovirt_auth) fact, which you can later use
       # in different modules as follows:
       - ovirt_vms:
           auth: "{{ ovirt_auth }}"
           state: absent
           name: myvm

    always:
      - name: Always revoke the SSO token
        ovirt_auth:
          state: absent
          ovirt_auth: "{{ ovirt_auth }}"
</pre>    <h2 id="return-values">Return Values</h2> <p>Common return values are documented here <a class="reference internal" href="../common_return_values/"><span class="doc">Return Values</span></a>, the following are the fields unique to this module:</p> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>ovirt_auth</td> <td> <div>Authentication facts, needed to perform authentication to oVirt/RHV.</div> </td> <td align="center">success</td> <td align="center">complex</td> <td align="center"></td> </tr> <tr> <td>contains:</td> <td colspan="4"> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>timeout</td> <td> <div>Number of seconds to wait for response.</div> </td> <td align="center">success</td> <td align="center">int</td> <td align="center">0</td> </tr> <tr> <td>url</td> <td> <div>URL of the oVirt/RHV engine API endpoint.</div> </td> <td align="center">success</td> <td align="center">string</td> <td align="center">https://ovirt.example.com/ovirt-engine/api</td> </tr> <tr> <td>insecure</td> <td> <div>Flag indicating if insecure connection is used.</div> </td> <td align="center">success</td> <td align="center">bool</td> <td align="center">False</td> </tr> <tr> <td>kerberos</td> <td> <div>Flag indicating if kerberos is used for authentication.</div> </td> <td align="center">success</td> <td align="center">bool</td> <td align="center">False</td> </tr> <tr> <td>compress</td> <td> <div>Flag indicating if compression is used for connection.</div> </td> <td align="center">success</td> <td align="center">bool</td> <td align="center">True</td> </tr> <tr> <td>headers</td> <td> <div>Dictionary of HTTP headers to be added to each API call.</div> </td> <td align="center">success</td> <td align="center">dict</td> <td align="center"></td> </tr> <tr> <td>token</td> <td> <div>SSO token which is used for connection to oVirt/RHV engine.</div> </td> <td align="center">success</td> <td align="center">string</td> <td align="center">kdfVWp9ZgeewBXV-iq3Js1-xQJZPSEQ334FLb3eksoEPRaab07DhZ8ED8ghz9lJd-MQ2GqtRIeqhvhCkrUWQPw</td> </tr> <tr> <td>ca_file</td> <td> <div>CA file, which is used to verify SSL/TLS connection.</div> </td> <td align="center">success</td> <td align="center">string</td> <td align="center">ca.pem</td> </tr> </table> </td> </tr> </table>   <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>Everytime you use ovirt_auth module to obtain ticket, you need to also revoke the ticket, when you no longer need it, otherwise the ticket would be revoked by engine when it expires. For an example of how to achieve that, please take a look at <em>examples</em> section.</li> <li>In order to use this module you have to install oVirt/RHV Python SDK. To ensure it’s installed with correct version you can create the following task: <em>pip: name=ovirt-engine-sdk-python version=4.0.0</em>
</li> <li>Note that in oVirt/RHV 4.1 if you want to use a user which is not administrator you must enable the <em>ENGINE_API_FILTER_BY_DEFAULT</em> variable in engine. In oVirt/RHV 4.2 and later it’s enabled by default.</li> </ul> </div>  <h3 id="status">Status</h3> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/latest/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <a class="reference internal" href="../dev_guide/testing/"><span class="doc">Testing Ansible</span></a> and <a class="reference internal" href="../dev_guide/developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Michael DeHaan<br>© 2017 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/ovirt_auth_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/ovirt_auth_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
