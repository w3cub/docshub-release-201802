
<!DOCTYPE HTML>

<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Win_find - Ansible - W3cubDocs</title>
  
  <meta name="description" content=" New in version 2.3. ">
  <meta name="keywords" content="win, find, -, return, list, files, based, on, specific, criteria, ansible">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="mobile-web-app-capable" content="yes">
  
  <link rel="canonical" href="http://docs.w3cub.com/ansible/win_find_module/">
  <link href="/favicon.png" rel="icon">
  <link type="text/css" rel="stylesheet" href="/assets/application-e0f881b0fce8cbe96f33dadc355b7159d5d2912911231446d60eb8f9caffa802.css">
  <script type="text/javascript" src="/assets/application-8fc46316434047265cd383f02b8e7f434ed7dec4a59f920dd633deef8d488d1b.js"></script>
  <script src="/json/ansible.js"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71174418-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body>
	<div class="_app">
	<header class="_header">
  
  <form class="_search">
    <input type="search" class="_search-input" placeholder="Search&hellip;" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" maxlength="20">
    <a class="_search-clear"></a>
    <div class="_search-tag"></div>
  </form>
  
  <a class="_home-link" href="/" ></a>
  <a class="_menu-link"></a>
  <h1 class="_logo">
    <a href="/" class="_nav-link" title="API Documentation Browser">W3cubDocs</a>
  </h1>
  
  <span class="_logo-sub-nav">/</span><span class="_logo-sub-nav"><a href="/ansible/" class="_nav-link" title="" style="margin-left:0;">Ansible</a></span>
  
  <nav class="_nav">
    <a href="/app/" class="_nav-link ">App</a>
    <a href="/about/" class="_nav-link ">About</a>
  </nav>
</header>
	<section class="_sidebar">
		<div class="_list">
			
		</div>
	</section>
	<section class="_container ">
		<div class="_content">
			<div class="_page _sphinx">
				
<h1 id="win-find">win_find - return a list of files based on specific criteria</h1> <div class="versionadded" id="win-find-return-a-list-of-files-based-on-specific-criteria"> <p><span class="versionmodified">New in version 2.3.</span></p> </div>  <ul class="simple"> <li><a class="reference internal" href="#synopsis" id="id1">Synopsis</a></li> <li><a class="reference internal" href="#options" id="id2">Options</a></li> <li><a class="reference internal" href="#examples" id="id3">Examples</a></li> <li><a class="reference internal" href="#return-values" id="id4">Return Values</a></li> <li>
<a class="reference internal" href="#notes" id="id5">Notes</a><ul> <li><a class="reference internal" href="#status" id="id6">Status</a></li> </ul> </li> </ul>   <h2 id="synopsis">Synopsis</h2> <ul class="simple"> <li>Return a list of files based on specified criteria.</li> <li>Multiple criteria are AND’d together.</li> <li>For non-Windows targets, use the <a class="reference internal" href="../find_module/#find"><span class="std std-ref">find</span></a> module instead.</li> </ul>   <h2 id="options">Options</h2> <table> <tr> <th class="head">parameter</th> <th class="head">required</th> <th class="head">default</th> <th class="head">choices</th> <th class="head">comments</th> </tr> <tr> <td>age<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Select files or folders whose age is equal to or greater than the specified time. Use a negative age to find files equal to or less than the specified time. You can choose seconds, minutes, hours, days or weeks by specifying the first letter of an of those words (e.g., "2s", "10d", 1w").</div> </td> </tr> <tr> <td>age_stamp<br>
</td> <td>no</td> <td>mtime</td> <td><ul>
<li>atime</li>
<li>mtime</li>
<li>ctime</li>
</ul></td> <td> <div>Choose the file property against which we compare <code>age</code>. The default attribute we compare with is the last modification time.</div> </td> </tr> <tr> <td>checksum_algorithm<br>
</td> <td>no</td> <td>sha1</td> <td><ul>
<li>md5</li>
<li>sha1</li>
<li>sha256</li>
<li>sha384</li>
<li>sha512</li>
</ul></td> <td> <div>Algorithm to determine the checksum of a file. Will throw an error if the host is unable to use specified algorithm.</div> </td> </tr> <tr> <td>file_type<br>
</td> <td>no</td> <td>file</td> <td><ul>
<li>file</li>
<li>directory</li>
</ul></td> <td> <div>Type of file to search for</div> </td> </tr> <tr> <td>follow<br>
</td> <td>no</td> <td></td> <td><ul>
<li>true</li>
<li>false</li>
</ul></td> <td> <div>Set this to true to follow symlinks in the path. This needs to be used in conjunction with <code>recurse</code>.</div> </td> </tr> <tr> <td>get_checksum<br>
</td> <td>no</td> <td>True</td> <td><ul>
<li>true</li>
<li>false</li>
</ul></td> <td> <div>Whether to return a checksum of the file in the return info (default sha1), use <code>checksum_algorithm</code> to change from the default.</div> </td> </tr> <tr> <td>hidden<br>
</td> <td>no</td> <td></td> <td><ul>
<li>true</li>
<li>false</li>
</ul></td> <td> <div>Set this to include hidden files or folders</div> </td> </tr> <tr> <td>paths<br>
</td> <td>yes</td> <td></td> <td></td> <td> <div>List of paths of directories to search for files or folders in. This can be supplied as a single path or a list of paths.</div> </td> </tr> <tr> <td>patterns<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>One or more (powershell or regex) patterns to compare filenames with. The type of pattern matching is controlled by <code>use_regex</code> option. The patterns retrict the list of files or folders to be returned based on the filenames. For a file to be matched it only has to match with one pattern in a list provided.</div> </td> </tr> <tr> <td>recurse<br>
</td> <td>no</td> <td></td> <td><ul>
<li>true</li>
<li>false</li>
</ul></td> <td> <div>Will recursively descend into the directory looking for files or folders</div> </td> </tr> <tr> <td>size<br>
</td> <td>no</td> <td></td> <td></td> <td> <div>Select files or folders whose size is equal to or greater than the specified size. Use a negative value to find files equal to or less than the specified size. You can specify the size with a suffix of the byte type i.e. kilo = k, mega = m... Size is not evaluated for symbolic links.</div> </td> </tr> <tr> <td>use_regex<br>
</td> <td>no</td> <td></td> <td><ul>
<li>true</li>
<li>false</li>
</ul></td> <td> <div>Will set patterns to run as a regex check if true</div> </td> </tr> </table>   <h2 id="examples">Examples</h2>  <pre data-language="YAML"># Find files in path
- win_find:
    paths: D:\temp

# Find hidden files in path
- win_find:
    paths: D:\temp
    hidden: True

# Find files in multiple paths
- win_find:
    paths: ['C:\temp', 'D:\temp']

# Find files in directory while searching recursively
- win_find:
    paths: D:\temp
    recurse: True

# Find files in directory while following symlinks
- win_find:
    paths: D:\temp
    recurse: True
    follow: True

# Find files with .log and .out extension using powershell wildcards
- win_find:
    paths: D:\temp
    patterns: ['*.log', '*.out']

# Find files in path based on regex pattern
- win_find:
    paths: D:\temp
    patterns: 'out_\d{8}-\d{6}.log'

# Find files older than 1 day
- win_find:
    paths: D:\temp
    age: 86400

# Find files older than 1 day based on create time
- win_find:
    paths: D:\temp
    age: 86400
    age_stamp: ctime

# Find files older than 1 day with unit syntax
- win_find:
    paths: D:\temp
    age: 1d

# Find files newer than 1 hour
- win_find:
    paths: D:\temp
    age: -3600

# Find files newer than 1 hour with unit syntax
- win_find:
    paths: D:\temp
    age: -1h

# Find files larger than 1MB
- win_find:
    paths: D:\temp
    size: 1048576

# Find files larger than 1GB with unit syntax
- win_find:
    paths: D:\temp
    size: 1g

# Find files smaller than 1MB
- win_find:
    paths: D:\temp
    size: -1048576

# Find files smaller than 1GB with unit syntax
- win_find:
    paths: D:\temp
    size: -1g

# Find folders/symlinks in multiple paths
- win_find:
    paths: ['C:\temp', 'D:\temp']
    file_type: directory

# Find files and return SHA256 checksum of files found
- win_find:
    paths: C:\temp
    get_checksum: True
    checksum_algorithm: sha256

# Find files and do not return the checksum
- win_find:
    path: C:\temp
    get_checksum: False
</pre>    <h2 id="return-values">Return Values</h2> <p>Common return values are documented here <a class="reference internal" href="../common_return_values/"><span class="doc">Return Values</span></a>, the following are the fields unique to this module:</p> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>files</td> <td> <div>Information on the files/folders that match the criteria returned as a list of dictionary elements for each file matched</div> </td> <td align="center">success</td> <td align="center">complex</td> <td align="center"></td> </tr> <tr> <td>contains:</td> <td colspan="4"> <table> <tr> <th class="head">name</th> <th class="head">description</th> <th class="head">returned</th> <th class="head">type</th> <th class="head">sample</th> </tr> <tr> <td>lastwritetime</td> <td> <div>the last modification time of the file represented in seconds since epoch</div> </td> <td align="center">success, path exists</td> <td align="center">float</td> <td align="center">1477984205.15</td> </tr> <tr> <td>creationtime</td> <td> <div>the create time of the file represented in seconds since epoch</div> </td> <td align="center">success, path exists</td> <td align="center">float</td> <td align="center">1477984205.15</td> </tr> <tr> <td>lastaccesstime</td> <td> <div>the last access time of the file represented in seconds since epoch</div> </td> <td align="center">success, path exists</td> <td align="center">float</td> <td align="center">1477984205.15</td> </tr> <tr> <td>owner</td> <td> <div>the owner of the file</div> </td> <td align="center">success, path exists</td> <td align="center">string</td> <td align="center">BUILTIN\Administrators</td> </tr> <tr> <td>path</td> <td> <div>the full absolute path to the file</div> </td> <td align="center">success, path exists</td> <td align="center">string</td> <td align="center">BUILTIN\Administrators</td> </tr> <tr> <td>isarchive</td> <td> <div>if the path is ready for archiving or not</div> </td> <td align="center">success, path exists</td> <td align="center">boolean</td> <td align="center">True</td> </tr> <tr> <td>ishidden</td> <td> <div>if the path is hidden or not</div> </td> <td align="center">success, path exists</td> <td align="center">boolean</td> <td align="center">True</td> </tr> <tr> <td>lnk_source</td> <td> <div>the target of the symbolic link, will return null if not a link or the link is broken</div> </td> <td align="center"></td> <td align="center">string</td> <td align="center">C:\temp</td> </tr> <tr> <td>size</td> <td> <div>the size in bytes of a file or folder</div> </td> <td align="center">success, path exists, path is not a link</td> <td align="center">int</td> <td align="center">1024</td> </tr> <tr> <td>isdir</td> <td> <div>if the path is a directory or not</div> </td> <td align="center">success, path exists</td> <td align="center">boolean</td> <td align="center">True</td> </tr> <tr> <td>extension</td> <td> <div>the extension of the file at path</div> </td> <td align="center">success, path exists, path is a file</td> <td align="center">string</td> <td align="center">.ps1</td> </tr> <tr> <td>isreadonly</td> <td> <div>if the path is read only or not</div> </td> <td align="center">success, path exists</td> <td align="center">boolean</td> <td align="center">True</td> </tr> <tr> <td>sharename</td> <td> <div>the name of share if folder is shared</div> </td> <td align="center">success, path exists, path is a directory and isshared == True</td> <td align="center">string</td> <td align="center">file-share</td> </tr> <tr> <td>checksum</td> <td> <div>The checksum of a file based on checksum_algorithm specified</div> </td> <td align="center">success, path exists, path is a file, get_checksum == True</td> <td align="center">string</td> <td align="center">09cb79e8fc7453c84a07f644e441fd81623b7f98</td> </tr> <tr> <td>islnk</td> <td> <div>if the path is a symbolic link or junction or not</div> </td> <td align="center">success, path exists</td> <td align="center">boolean</td> <td align="center">True</td> </tr> <tr> <td>attributes</td> <td> <div>attributes of the file at path in raw form</div> </td> <td align="center">success, path exists</td> <td align="center">string</td> <td align="center">Archive, Hidden</td> </tr> <tr> <td>isshared</td> <td> <div>if the path is shared or not</div> </td> <td align="center">success, path exists</td> <td align="center">boolean</td> <td align="center">True</td> </tr> </table> </td> </tr> <tr> <td>changed</td> <td> <div>Whether anything was chagned</div> </td> <td align="center">always</td> <td align="center">boolean</td> <td align="center">True</td> </tr> <tr> <td>examined</td> <td> <div>The number of files/folders that was checked</div> </td> <td align="center">always</td> <td align="center">int</td> <td align="center">10</td> </tr> <tr> <td>matched</td> <td> <div>The number of files/folders that match the criteria</div> </td> <td align="center">always</td> <td align="center">int</td> <td align="center">2</td> </tr> </table>   <h2 id="notes">Notes</h2> <div class="admonition note"> <p class="first admonition-title">Note</p> <ul class="last simple"> <li>For non-Windows targets, use the <a class="reference internal" href="../find_module/#find"><span class="std std-ref">find</span></a> module instead.</li> </ul> </div>  <h3 id="status">Status</h3> <p>This module is flagged as <strong>preview</strong> which means that it is not guaranteed to have a backwards compatible interface.</p> <p>For help in developing on modules, should you be so inclined, please read <a class="reference internal" href="https://docs.ansible.com/ansible/latest/community.html" target="_blank"><span class="doc">Community Information &amp; Contributing</span></a>, <a class="reference internal" href="../dev_guide/testing/"><span class="doc">Testing Ansible</span></a> and <a class="reference internal" href="../dev_guide/developing_modules/"><span class="doc">Developing Modules</span></a>.</p>
<div class="_attribution">
  <p class="_attribution-p">
    © 2012–2017 Michael DeHaan<br>© 2017 Red Hat, Inc.<br>Licensed under the GNU General Public License version 3.<br>
    <a href="https://docs.ansible.com/ansible/latest/win_find_module.html" class="_attribution-link" target="_blank">https://docs.ansible.com/ansible/latest/win_find_module.html</a>
  </p>
</div>

			</div>
		</div>
	</section>

	</div>
	<svg style="display:none">
		<symbol id="icon-dir"><svg viewBox="0 0 20 20"><path d="M15 10c0 .3-.305.515-.305.515l-8.56 5.303c-.625.41-1.135.106-1.135-.67V4.853c0-.777.51-1.078 1.135-.67l8.56 5.305S15 9.702 15 10z"/></svg></symbol>
	  </svg>
</body>
</html>
